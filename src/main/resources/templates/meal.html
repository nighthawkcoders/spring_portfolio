
<!DOCTYPE html>
<html>
  <head>
    <title>Meal Planner</title>
  </head>
  <body>
    <table id="meal-table">
      <thead>
        <tr>
          <th></th>
          <th>Breakfast</th>
          <th>Snack</th>
          <th>Lunch</th>
          <th>Snack</th>
          <th>Dinner</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Monday</td>
          <td class="meal-cell" data-day="Monday" data-meal="Breakfast"></td>
          <td class="meal-cell" data-day="Monday" data-meal="Snack"></td>
          <td class="meal-cell" data-day="Monday" data-meal="Lunch"></td>
          <td class="meal-cell" data-day="Monday" data-meal="Snack"></td>
          <td class="meal-cell" data-day="Monday" data-meal="Dinner"></td>
        </tr>
        <tr>
          <td>Tuesday</td>
          <td class="meal-cell" data-day="Tuesday" data-meal="Breakfast"></td>
          <td class="meal-cell" data-day="Tuesday" data-meal="Snack"></td>
          <td class="meal-cell" data-day="Tuesday" data-meal="Lunch"></td>
          <td class="meal-cell" data-day="Tuesday" data-meal="Snack"></td>
          <td class="meal-cell" data-day="Tuesday" data-meal="Dinner"></td>
        </tr>
        <td>Wednesday</td>
        <td class="meal-cell" data-day="Wednesday" data-meal="Breakfast"></td>
        <td class="meal-cell" data-day="Wednesday" data-meal="Snack"></td>
        <td class="meal-cell" data-day="Wednesday" data-meal="Lunch"></td>
        <td class="meal-cell" data-day="Wednesday" data-meal="Snack"></td>
        <td class="meal-cell" data-day="Wednesday" data-meal="Dinner"></td>
        </tr>
        <tr>
          <td>Thursday</td>
          <td class="meal-cell" data-day="Thursday" data-meal="Breakfast"></td>
          <td class="meal-cell" data-day="Thursday" data-meal="Snack"></td>
          <td class="meal-cell" data-day="Thursday" data-meal="Lunch"></td>
          <td class="meal-cell" data-day="Thursday" data-meal="Snack"></td>
          <td class="meal-cell" data-day="Thursday" data-meal="Dinner"></td>
        </tr>
        <td>Friday</td>
        <td class="meal-cell" data-day="Friday" data-meal="Breakfast"></td>
        <td class="meal-cell" data-day="Friday" data-meal="Snack"></td>
        <td class="meal-cell" data-day="Friday" data-meal="Lunch"></td>
        <td class="meal-cell" data-day="Friday" data-meal="Snack"></td>
        <td class="meal-cell" data-day="Friday" data-meal="Dinner"></td>
        </tr>
        <tr>
          <td>Saturday</td>
          <td class="meal-cell" data-day="Saturday" data-meal="Breakfast"></td>
          <td class="meal-cell" data-day="Saturday" data-meal="Snack"></td>
          <td class="meal-cell" data-day="Saturday" data-meal="Lunch"></td>
          <td class="meal-cell" data-day="Saturday" data-meal="Snack"></td>
          <td class="meal-cell" data-day="Saturday" data-meal="Dinner"></td>
        </tr>
        <tr>
          <td>Sunday</td>
          <td class="meal-cell" data-day="Sunday" data-meal="Breakfast"></td>
          <td class="meal-cell" data-day="Sunday" data-meal="Snack"></td>
          <td class="meal-cell" data-day="Sunday" data-meal="Lunch"></td>
          <td class="meal-cell" data-day="Sunday" data-meal="Snack"></td>
          <td class="meal-cell" data-day="Sunday" data-meal="Dinner"></td>
        </tr>
        <!-- Add rows for the rest of the week -->
      </tbody>
    </table>
    <script>
      const mealTable = document.querySelector("#meal-table");
      mealTable.addEventListener("click", async (event) => {
        if (!event.target.classList.contains("meal-cell")) {
          return;
        }
        const day = event.target.dataset.day;
        const meal = event.target.dataset.meal;
        const name = prompt("Enter meal name:");
        const description = prompt("Enter meal description:");
        if (!name || !description) {
          return;
        }
        const response = await fetch("/meals", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ name, description, day, meal }),
        });
        if (!response.ok) {
          alert("Failed to add meal. Please try again later.");
          return;
        }
        event.target.textContent = name;
      });

    // Save the updated data to local storage
    const meals = JSON.parse(localStorage.getItem("meals")) || [];
    meals.push({ day, meal, name, description });
    localStorage.setItem("meals", JSON.stringify(meals));

  // Load data from local storage when the page loads
  window.addEventListener("load", () => {
    const meals = JSON.parse(localStorage.getItem("meals")) || [];
    meals.forEach((meal) => {
      const cell = document.querySelector(
        `td[data-day="${meal.day}"][data-meal="${meal.meal}"]`
      );
      localStorage.clear();


    });
  });
    </script>
  </body>
  <style>
    table {
  border-collapse: collapse;
}

th, td {
  border: 1px solid black;
  padding: 8px;
}

th {
  background-color: lightgray;
}
  </style>
</html>
